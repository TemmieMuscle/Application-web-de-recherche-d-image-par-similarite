import{a as g}from"./http-api-DGFSZnvK.js";import{_ as v}from"./Image.vue_vue_type_script_setup_true_lang-DwLFZ5Za.js";import{d as I,r as u,g as y,k,i as w,c as r,a as t,l as d,t as f,h as L,F as p,b as S,m as x,n as C,o}from"./index-DfUFwx5v.js";const M={key:0},A={key:1},B={key:0},E={class:"similar-images-container"},F=I({__name:"QuizzImage",setup(N){const i=u([]),n=u(null),s=u([]),h=async()=>{try{if(i.value=await g.getImageList(),i.value.length>0){const e=Math.floor(Math.random()*i.value.length);n.value=i.value[e].id}}catch(e){console.error("Error fetching image list:",e)}},_=async e=>{try{s.value=await g.getSimilarImages(e),s.value=s.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),s.value=[]}};y(n,async e=>{e!==null?await _(e):s.value=[]});const c=k(()=>{if(!n.value)return[];const e=new Set([n.value,...s.value.map(l=>l.id)]);return Array.from(e).map(l=>i.value.find(m=>m.id===l)||{id:l,name:"Unknown"}).sort(()=>Math.random()-.5)});return w(h),(e,a)=>{const l=C("router-link");return o(),r(p,null,[t("div",null,[a[1]||(a[1]=t("h3",null,"Random Image",-1)),n.value!==null?(o(),r("div",M,[t("p",null,"Image ID: "+f(n.value),1),d(v,{id:n.value},null,8,["id"])])):(o(),r("div",A,a[0]||(a[0]=[t("p",null,"Loading image...",-1)])))]),t("div",null,[c.value.length>0?(o(),r("div",B,[a[2]||(a[2]=t("h4",null,"Images",-1)),t("div",E,[(o(!0),r(p,null,S(c.value,m=>(o(),r("div",{key:m.id,class:"similar-image"},[d(l,{to:"/ImageQuest"},{default:x(()=>[d(v,{id:m.id},null,8,["id"])]),_:2},1024),t("p",null,f(m.name),1)]))),128))])])):L("",!0)])],64)}}});export{F as default};
