import{a as d}from"./http-api-DGFSZnvK.js";import{_}from"./Image.vue_vue_type_script_setup_true_lang-JjbWGYDg.js";import{d as I,r as u,g as y,k,i as w,c as o,a as t,t as g,h as L,F as v,b as S,l as f,m as x,n as C,o as r}from"./index-AwHfbbQM.js";const M={key:0},A=["src"],B={key:1},E={key:0},N={class:"similar-images-container"},Q=I({__name:"QuizzImage",setup(V){const i=u([]),n=u(null),s=u([]),h=async()=>{try{if(i.value=await d.getImageList(),i.value.length>0){const e=Math.floor(Math.random()*i.value.length);n.value=i.value[e].id}}catch(e){console.error("Error fetching image list:",e)}},p=async e=>{try{s.value=await d.getSimilarImages(e),s.value=s.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),s.value=[]}};y(n,async e=>{e!==null?await p(e):s.value=[]});const c=k(()=>{if(!n.value)return[];const e=new Set([n.value,...s.value.map(l=>l.id)]);return Array.from(e).map(l=>i.value.find(m=>m.id===l)||{id:l,name:"Unknown"}).sort(()=>Math.random()-.5)});return w(h),(e,a)=>{const l=C("router-link");return r(),o(v,null,[t("div",null,[a[1]||(a[1]=t("h3",null,"Random Image",-1)),n.value!==null?(r(),o("div",M,[t("p",null,"Image ID: "+g(n.value),1),t("img",{src:`http://localhost:8080/images/${n.value}`},null,8,A)])):(r(),o("div",B,a[0]||(a[0]=[t("p",null,"Loading image...",-1)])))]),t("div",null,[c.value.length>0?(r(),o("div",E,[a[2]||(a[2]=t("h4",null,"Images",-1)),t("div",N,[(r(!0),o(v,null,S(c.value,m=>(r(),o("div",{key:m.id,class:"similar-image"},[f(l,{to:"/ImageQuest"},{default:x(()=>[f(_,{id:m.id},null,8,["id"])]),_:2},1024),t("p",null,g(m.name),1)]))),128))])])):L("",!0)])],64)}}});export{Q as default};
