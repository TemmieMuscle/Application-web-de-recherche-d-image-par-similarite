import{a as c}from"./http-api-XlQ5B82Y.js";import{_ as E}from"./Image.vue_vue_type_script_setup_true_lang-BvowqDcL.js";import{d as x,r as d,g as F,k as R,i as A,c as s,a as l,t as v,h as B,F as h,b as S,l as y,m as $,n as C,o as i}from"./index-DQm0Ok3x.js";const D={key:0},z=["id"],N={key:1},U={key:0},V={class:"similar-images-container"},Z=x({__name:"QuizzImage",props:{id:{}},setup(p){const m=d([]),o=d(null),r=d([]),u=d(null),g=p,I=async()=>{try{if(m.value=await c.getImageList(),m.value.length>0){const e=Math.floor(Math.random()*m.value.length),a=m.value[e].id;o.value=a===0?1:a}}catch(e){console.error("Error fetching image list:",e)}},_=async e=>{try{r.value=await c.getSimilarImages(e),r.value=r.value.slice(0,3)}catch(a){console.error("Error fetching similar images:",a),r.value=[]}},w=async e=>{try{u.value=await c.getImageModif(e,1),M(e,u.value)}catch(a){console.error("Error fetching flou image:",a)}},k=(e,a)=>{const t=new FileReader;t.onload=()=>{const n=document.getElementById(`gallery-${e}`);n&&(n.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(a)},L=async e=>{try{u.value=await c.getImageModif(e,2),k(e,u.value)}catch(a){console.error("Error fetching zoom image:",a)}},M=(e,a)=>{const t=new FileReader;t.onload=()=>{const n=document.getElementById(`gallery-${e}`);n&&(n.innerHTML=`<img src="${t.result}" style="width:300px;">`)},t.readAsDataURL(a)};F(o,async e=>{e!==null?(await _(e),g.id==1?await w(e):g.id==2&&await L(e)):(r.value=[],u.value=null)});const f=R(()=>{if(!o.value)return[];const e=new Set([o.value,...r.value.map(t=>t.id)]);return Array.from(e).map(t=>m.value.find(n=>n.id===t)||{id:t,name:"Unknown"}).sort(()=>Math.random()-.5)});return A(I),(e,a)=>{const t=C("router-link");return i(),s(h,null,[l("div",null,[a[1]||(a[1]=l("h3",null,"Random Image",-1)),o.value!==null?(i(),s("div",D,[l("p",null,"Image ID: "+v(o.value),1),l("figure",{id:"gallery-"+o.value},null,8,z)])):(i(),s("div",N,a[0]||(a[0]=[l("p",null,"Loading image...",-1)])))]),l("div",null,[f.value.length>0?(i(),s("div",U,[a[2]||(a[2]=l("h4",null,"Images",-1)),l("div",V,[(i(!0),s(h,null,S(f.value,n=>(i(),s("div",{key:n.id,class:"similar-image"},[y(t,{to:{name:"Result",params:{id:n.id===o.value?0:1}}},{default:$(()=>[y(E,{id:n.id},null,8,["id"])]),_:2},1032,["to"]),l("p",null,v(n.name),1)]))),128))])])):B("",!0)])],64)}}});export{Z as default};
